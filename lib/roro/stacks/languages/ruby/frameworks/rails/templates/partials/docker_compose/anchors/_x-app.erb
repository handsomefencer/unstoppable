x-app:
  &app
<%= partial('app_depends_on')%>
  env_file:
    - ./mise/env/base.env
    - ./mise/env/development.env
    - ./mise/containers/app/env/base.env
    - ./mise/containers/app/env/development.env
  image: <%= @env[:base][:app_name][:value] %>
  stdin_open: true
  tmpfs:
    - "/app/tmp"
    - "/app/log"
  tty: true
  user: root
  volumes:
    - .:/app
    - gem_cache:/usr/local/bundle/gems
    - node_modules:/app/node_modules