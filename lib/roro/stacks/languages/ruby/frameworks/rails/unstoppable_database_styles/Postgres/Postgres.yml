preface: PostgreSQL is a powerful, open source object-relational database system with over 30 years of active development that has earned it a strong reputation for reliability, feature robustness, and performance.

env:
  base:
    db_flag:
      name: Rails new --database flag
      value: postgresql
    db_pkg_development: 
      name: Alpine db pkg for development
      value: postgresql-dev
    db_pkg_production: 
      name: Alpine db pkg for production
      value: postgresql-client
    db_image:
      value: postgres
    db_image_tag:
      value: 16.3-alpine
    db_healthcheck_test_command: 
      name: Docker compose Database service healthcheck test command
      value: ["CMD-SHELL", "pg_isready", "-d", "db_prod"]
    db_dev_service_port:
      value: 5432
    db_test_service_port:
      value: 5433
    db_vendor:
      value: postgresql
    db_volume:
      value: /var/lib/postgresql/data
    db: 
      POSTGRES_NAME:
        name: Database name
        value: postgres
      POSTGRES_PASSWORD:
        name: Database password
        value: password
      POSTGRES_USERNAME:
        name: Database username
        value: postgres

  development:
    app: 
      DATABASE_URL:
        name: database url overrides variables in database.yml
        value: "postgresql://postgres:password@db-dev/db_development"
    db_pkg:
      name: Name of alpine db pkgs in development
      value: postgresql-dev
  production:
    db_pkg:
      name: Name of alpine db pkgs in production
      value: postgresql-client

  test: 
    app: 
      DATABASE_URL:
        value: "postgresql://postgres:password@db-test/db_test"
